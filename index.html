<!DOCTYPE html>

<html>
    

    <head>
        <style>
    body {
      font-family: Arial, sans-serif;
      background: #ffc4e7;
      padding: 20px;
    }
    table {
      border-collapse: collapse;
      width: 60%;
      margin: auto;
      background: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    th, td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: left;
    }
    th {
      background: #d12c79;
      color: white;
    }
    tr:hover {
      background: #f1f1f1;
    }
    .center {
      text-align: center;
    }
  </style>


        <title>Teamo</title>
    </head>

    <body>
        <h1>Te amo</h1>
        <button id="teodio">Te odio </button>
        <style>
        #teodio {
          background-color: #393939;  /* gris oscuro */
          color: #ffffff;            /* texto blanco */
          padding: 10px 18px;
          border: none;
          border-radius: 8px;        /* esquinas suaves */
          font-size: 14px;
          cursor: pointer;
          transition: background 0.2s ease; /* animaci√≥n suave */
        }

        #teodio:hover {
          background-color: #626262; /* un poco m√°s claro al pasar */
        }
        </style>
        
        <h3>Streak no peleas</h3>
        <label for="inicio">Inicio:</label>
        <input type="date" id="inicio">
        <button id="guardar">Guardar fecha</button>

        <style>
        #inicio {
          background-color: #ffffff;  /* gris oscuro */
          color: #000000;            /* texto blanco */
          padding: 10px 18px;
          border: 1.5px solid #393939;
          border-radius: 8px;        /* esquinas suaves */
          font-size: 14px;
          cursor: pointer;
          transition: background 0.2s ease; /* animaci√≥n suave */
        }

        #inicio:hover {
          background-color: #e0e0e0; /* un poco m√°s claro al pasar */
        }
        </style>

        <style>
        #guardar {
          background-color: #393939;  /* gris oscuro */
          color: #ffffff;            /* texto blanco */
          padding: 10px 18px;
          border: none;
          border-radius: 8px;        /* esquinas suaves */
          font-size: 14px;
          cursor: pointer;
          transition: background 0.2s ease; /* animaci√≥n suave */
        }

        #guardar:hover {
          background-color: #626262; /* un poco m√°s claro al pasar */
        }
        </style>

        <p>Streak: <span id="racha">0</span> d√≠as</p>

        <h2 style="text-align:center;">ay</h2>
        <table>
            <tr>
            <th class="center">‚úÖ</th>
            <th>Horas</th>
            </tr>
            <tr><td class="center"><input type="checkbox" id="hora_0000"></td><td>0:00 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0101"></td><td>01:01 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0110"></td><td>01:10 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0111"></td><td>1:11 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0202"></td><td>02:02 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0220"></td><td>02:20 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0222"></td><td>2:22 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0303"></td><td>03:03 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0333"></td><td>3:33 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0404"></td><td>04:04 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0444"></td><td>4:44 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0505"></td><td>05:05 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0555"></td><td>5:55 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0606"></td><td>06:06 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0666"></td><td>6:66 üò≥</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0707"></td><td>07:07 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0808"></td><td>08:08 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_0909"></td><td>09:09 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1001"></td><td>10:01 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1010"></td><td>10:10 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1111"></td><td>11:11 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1212"></td><td>12:12 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1221"></td><td>12:21 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1234"></td><td>12:34 am</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1301"></td><td>1:01 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1311"></td><td>1:11 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1313"></td><td>13:13 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1331"></td><td>13:31 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1402"></td><td>2:02 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1414"></td><td>14:14 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1422"></td><td>2:22 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1441"></td><td>14:41 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1503"></td><td>3:03 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1533"></td><td>3:33 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1515"></td><td>15:15 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1551"></td><td>15:51 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1604"></td><td>4:04 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1616"></td><td>16:16 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1644"></td><td>4:44 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1705"></td><td>5:05 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1717"></td><td>17:17 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1755"></td><td>5:55 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1806"></td><td>6:06 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1818"></td><td>18:18 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1907"></td><td>7:07 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_1919"></td><td>19:19 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2008"></td><td>8:08 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2002"></td><td>20:02 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2020"></td><td>20:20 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2109"></td><td>9:09 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2112"></td><td>21:12 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2121"></td><td>21:21 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2201"></td><td>10:01 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2210"></td><td>10:10 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2222"></td><td>22:22 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2311"></td><td>11:11 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2323"></td><td>23:23 pm</td></tr>
            <tr><td class="center"><input type="checkbox" id="hora_2332"></td><td>23:32 pm</td></tr>
        </table>


        <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";

        const firebaseConfig = {
          apiKey: "AIzaSyCP7KAnsRwj3BPVRfNhr8sIYMaFqwUhTS8",
          authDomain: "page-158bf.firebaseapp.com",
          databaseURL: "https://page-158bf-default-rtdb.firebaseio.com",
          projectId: "page-158bf",
          storageBucket: "page-158bf.firebasestorage.app",
          messagingSenderId: "610421802319",
          appId: "1:610421802319:web:9e22d7076af9e552cef13a"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // ‚úÖ Guardar cambios al marcar/desmarcar checkbox
        document.querySelectorAll("input[type=checkbox]").forEach(checkbox => {
          if(!checkbox.id) checkbox.id = "cb_" + Math.random().toString(36).substr(2, 9);
          checkbox.addEventListener('change', () => {
            set(ref(database, 'checkboxes/' + checkbox.id), checkbox.checked);
          });
        });

        // ‚úÖ Leer cambios en tiempo real
        onValue(ref(database, 'checkboxes'), (snapshot) => {
          const data = snapshot.val();
          if(data){
            Object.keys(data).forEach(id => {
              const cb = document.getElementById(id);
              if(cb) cb.checked = data[id];
            });
          }
        });

        // ‚úÖ Racha basada en fecha de inicio
        const rachaSpan = document.getElementById('racha');
        const inputFecha = document.getElementById('inicio');

        onValue(ref(database, 'fechaInicio'), (snapshot) => {
          const fechaGuardada = snapshot.val();
          if(fechaGuardada){
            inputFecha.value = fechaGuardada;
            calcularRacha(fechaGuardada);
          }
        });

        inputFecha.addEventListener('change', () => {
          const fecha = inputFecha.value;
          if(fecha){
            set(ref(database, 'fechaInicio'), fecha);
            calcularRacha(fecha);
          }
        });

        function calcularRacha(fechaInicio){
          const hoy = new Date();
          const inicio = new Date(fechaInicio);
          const diff = hoy - inicio;
          const dias = Math.floor(diff / (1000 * 60 * 60 * 24)) + 1;
          if(rachaSpan) rachaSpan.textContent = dias;
        }
        </script>



    </body>
</html>



